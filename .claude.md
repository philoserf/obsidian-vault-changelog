# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Development Commands

- **Build for production**: `bun build.mjs production`
- **Development build with watch**: `bun dev` (builds to test-vault/.obsidian/plugins/ for testing)
- **Format code**: `bun format`
- **Lint code**: `bun lint`
- **Build**: `bun build`

Always run format, lint, and build commands after making changes.

## Architecture Overview

This is an Obsidian plugin that tracks file modifications and maintains a chronological changelog. The architecture consists of:

### Core Components

- **ChangelogPlugin** (`src/main.ts`): Main plugin class handling file system events, debounced change detection, and changelog generation
- **ChangelogSettingsTab** (`src/settings.ts`): Settings UI with path autocompletion and folder exclusion management
- **PathSuggest** (`src/suggest.ts`): File/folder path autocompletion component

### Key Plugin Behaviors

- Uses debounced file system event listeners (modify, delete, rename) to trigger changelog updates
- Generates markdown-formatted entries with timestamps using Moment.js
- Filters files by exclusion rules and limits results to configurable maximum
- Completely overwrites the changelog file on each update
- Supports both manual commands and automatic updates

### Development Setup

- Built with Bun as the build tool and package manager
- Uses custom `build.mjs` script that handles both production and development builds
- Development builds copy files to `test-vault/.obsidian/plugins/` for local testing
- TypeScript with strict mode enabled and modern ESNext target

### Testing Environment

The `test-vault/` directory serves as a local Obsidian vault for plugin development and testing.
